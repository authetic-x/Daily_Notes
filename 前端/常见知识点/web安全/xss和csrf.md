## xss

跨站脚本攻击(Cross Site Scripts)，指攻击者在网站上注入恶意的客户端代码，通过恶意脚本对客户端网页进行篡改，对用户浏览器进行控制或者获取用户隐私数据的一种攻击方式。XSS 攻击可分为三类：

### 反射型

这种攻击方式往往需要攻击者诱使用户点击一个恶意链接，或进入一个恶意网站，将恶意脚本注入给用户的页面。比如，你的页面上有个恶意链接指向 `www.xss.com/inject?q=1` ，这个链接返回的页面会有一堆恶意脚本，这些恶意脚本也可以随意获取你的隐私数据(如cookie脚本)

### 存储型

存储型 XSS 会把用户输入的数据存在服务器端，比如一个文章的评论。如果用户输入的是一段恶意脚本，不对其进行处理的话，那么其它用户一打开这篇文章的页面就会发生存储型 XSS 攻击

### 基于 DOM

这种 XSS 攻击一般是恶意修改页面的 DOM 结构，是纯粹发生在客户端的攻击



### XSS 攻击的防范：

1. `httpOnly` 防止窃取 Cookie。浏览器将禁止页面的Javascript 访问带有 HttpOnly 属性的Cookie
2. 输入检查， 对于用户的任何输入要进行检查、过滤和转义



## CSRF

跨域请求伪造(Cross Site Request Forgery)，指以受害者的名义向服务器发送伪造请求，从而在未授权的情况下执行在权限保护之下的操作。

CSRF 依赖的主要是浏览器每次请求都会默认携带与目标链接 domain 相同的第一方 cookie 这个特性。由于很多网站都依赖 cookie 进行会话追踪，因此攻击者也可以借助 cookie 去伪造登录用户的身份

比如你登陆一个博客网站 `www.blog.com`，`www.blog.com/delete/84731` 代表删除你刚发表的一篇文章。如果你进入了一个攻击者的页面，并且一张图片的链接为 `www.blog.com/delete/84731`，那么你点击这张图片就会触发文章删除的操作



### CSRF 攻击的防范：

1. Referer Check。请求头会有一个 `referer` 字段表示请求的来源地址，通过检查这个字段可以判断请求是否合法
2. 添加 token 验证。我们可以利用 token 让攻击者无法轻易的伪造用户的身份