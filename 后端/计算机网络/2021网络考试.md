## 物理层

### OSI模型和TCP/IP模型的差异

OSI: 应用层、表示层、会话层、传输层、网络层、数据链路层、物理层

TCP/IP：应用层、传输层、网际层、链路层

> OSI是一个理想的网络标准，区分了服务、接口和协议，但它出现时TCP/IP已经广泛应用了，而且它的协议和服务过于复杂，会话层作用不大，表示层几乎没用。
>
> TCP/IP是一个事实的网络标准，它是UNIX标准的一部分，但它不能清楚地区分服务、接口、协议三个概念，也未能区分物理层与链路层，而且有些技术难以适应更新



### PCM

脉冲编码调制（Pulse Code Modulation），简称PCM。脉码调制是对连续变化的模拟信号进行处理、量化、编码后转换为数字信号的一种调制方式



### 物理媒体

分为两类：导引型媒体和非导引型媒体

* 双绞铜线
* 同轴电缆
* 光纤
* 陆地无线电通道
* 卫星无线电信道



### ADSL

非对称数字用户线路，用数字技术对现有的模拟电话用户先进行改造，使它能承载宽带数字业务。说它“非对称”是因为它的下行带宽都远远大于上行带宽。

ADSL最大的好处就是可以利用现有电话网中的用户线，而不需要重新布线。

**物理层的主要任务是确定与传输媒体的接口有关的一些特性。**



## 数据链路层

数据链路层使用的信道有两种类型：点对点信道和广播信道

数据链路层的协议一般都要解决三个问题：

1. 封装成帧：在数据的前后加上首部和尾部。首部和尾部一个重要的作用就是帧定界，使用特定的帧定界符来区分一个完整的帧，一般是ASCII码的SOH(01)和EOT(04)
2. 透明传输：指任何字符都能放在这样的帧中传输出去。当传送的字符集是ASCII文本时，其数据部分不会出现帧定界符，可其它的数据类型如图像就不一定了。为了解决透明传输的问题，数据链路层会对数据部分与帧定界符编码相同的数据进行转义，具体做法是在这个字符前面插入一个转义字符ESC(1B)
3. 差错检测：通常采用循环冗余检测(CRC)，在原始数据比特流后面加上n位帧检测序列(FCS)，在接受端将数据与相同的生成多项式做模2运算，余数为则没有出错

这里的差错是指比特流在物理链路传输过程中产生的差错，而可靠传输还要处理帧丢失、帧重复、帧失序的情况。过去OSI的观点是让数据链路层向上提供可靠传输，但由于当今通信链路的质量大大提高，所以互联网采用了区别对待的方式：对通信质量好的有线传输链路，不使用确认和重传的机制，而对通信质量差的无线传输链路，数据链路层需要使用确认和重传的机制。

### CSMA/CD

1. 准备发送，适配器(网卡)从网络层获得一个分组，加上以太网首部和尾部组成帧，放入适配器的缓存中
2. 检测信道，若检测到信道忙则不停地检测直到信道转为空闲；若检测到信道空闲，并在96比特时间内信道保持空闲就发送这个帧
3. 在发送过程中仍不停地检测信道，如果在争用期内(2t)一直未检测到碰撞则说明发送成功；若发生碰撞则立即停止发送数据，并按规定发送认为感染干扰信号。接着适配器执行指数退避算法，等待r倍512比特时间后，继续检测信道。

### 扩展以太网

#### 物理层扩展以太网

使用多个集线器，连接成覆盖更大范围的多级星形结构以太网。使用这种方式的所有主机都同属于一个碰撞域，最大吞吐量仍然是原来某一个局域网的吞吐量

#### 数据链路层扩展以太网

可以使用以太网交换机连接多个局域网，以太网交换机本质是一个多接口的网桥，以全双工方式工作。相互通信的主机都是独占传输媒体，无碰撞地传输数据。

交换机内部地帧交换表是通过子学习算法自动的逐渐建立起来的。

IEEE802.1D制了一个生成树协议STP，其要点是不改变网络的实际拓扑，但在逻辑上切断某些链路，使得从一台主机到所有其它主机的路径是无环路的树状结构，消除了兜圈子的现象。

现在以太网都是使用星形结构拓扑，传统的总线型以太网已经慢慢被淘汰了。

### 虚拟局域网

 在IEEE802.1Q标准中定义，VLAN是由一些局域网网段构成的与物理位置无关的逻辑组，这些网段具有某些共同的需求。每一个VLAN的帧都有一个明确的标识符，指明发送这个帧的计算机属于哪一个VLAN



## 真题

1. 无线LAN和有线LAN有什么区别？为什么无线LAN不能用有线LAN的协议？

   > 无线LAN是802.11中定义的，使用的传输介质是电磁波；而有线LAN是在802.3中定义的，传输介质是线缆。有线LAN使用CSMA/CD协议，该协议要求在发送数据时也要检测信道是否发生了碰撞，这就要求无线网卡在发射数据时同时监测，实现这一功能十分困难，并不适用。而且WLAN会存在隐蔽站和暴露站的问题。

2. 在有噪声信道的简单协议中，如何处理帧传错或传丢的问题？如何处理由于应答报告丢失引起的发送方的重复发送的帧？

   > 1. 在发送方设置定时器，如果超过了一定时间还没有收到某个帧的确认，就重传这个帧
   > 2. 每个发送的帧都会带上一个序列号，接收方可以根据这个序列号来判断是否为重复的帧

3. 什么是网络协议与网络服务？网络协议为何要分层设计？

   > 网络协议是在计算机网络中用于规定信息的格式以及如何发送接受信息的规则；而网络服务是指在不同的协议层中，下层为上层提供服务，上层利用下层提供的服务完成协议的内容。协议是水平的，服务是垂直的。
   >
   > 1. 各层间相互独立，把网络操作分成低复杂性单元，方便工程化
   > 2. 增加了灵活性，某一层的变化不会影响到其它层
   > 3. 各层间通过接口在相邻层通信，容易理解各层的功能。

4. 有几种常用的数据交换技术？各有什么特点？

   > 1. 电路交换。整个通信过程中双方一直占用电路，实时性强、时延小，但可能会造成信道浪费。
   > 2. 报文交换。允许多个用户在同一条线路上传输报文，比较适合报文较短，实时性要求低的通信
   > 3. 分组交换。按需分配链路，将报文切割为多个分组进行传输，比电路交换利用率更高，比报文交换的传输时延更小

5. IEEE802.3以太网使用什么协议？影响其性能的主要因素有哪些？IEEE802.3以太网与802.１１无线网的物理层有何差异？讨论在什么样的条件下，在无线LAN中有可能使用CSMA／CD协议。

   > CSMA/CD协议
   >
   > 传输介质、争用期大小、冲突发生频率
   >
   > 802.11在物理层定义了数据传输的信号特征和调制方法，定义了两个射频传输方法和一个红外线传输方法
   >
   > 如果所有站的发射有效范围都很大，以至于任一站都可以收到所有其它站发送的信号，那么任一站都可以与其他站以广播方式通信。在这样的条件下，CSMA/CD可以工作的很好。

6. IP中跳步数的作用(hop域)?

   > 防止IP包在网络内无限制地存在

7. Distance-Vector路由算法是在相邻结点之间交换路由信息，而LINK-STATE是在网络上所有结点之间交换路由信息

8. 对于宽带为3KHz的无噪声信道，假设信道中每个码元信号的可能状态数为16，则该信道所能支持的最大数据传输率可达多少？

   > 无噪声信道最高码元速率是带宽的2倍，即 2 * 3K * log2(16) = 24kbps

9. 数据率为 10MB/s 的以太网在物理媒体上的码元传输速率是多少码元 / 秒？

   > 码元传输速率即为波特率，以太网使用曼切斯特编码，这意味着每一位有两个信号周期。因此波特率是数据率的两倍，即20MHZ

10. 

