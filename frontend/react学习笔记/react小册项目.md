### diff 比对要点

1. 只进行同层比对
2. 不同的节点产生不同的树，也就是说只要两个同级节点不同，后面的子节点也都会重新生成
3. 通过 key 来指定哪些元素是相同的 (不同循环中的索引是因为若列表顺序改变，key 也会变，损失了性能)



### 为什么使用 immutable.js

`PureComponent` 和 `memo` 都只是进行了对象的浅层比对，也就是说如果属性是引用类型就无法正确判断属性值是否发生变化。若强行进行深层比对，对象属性值较为复杂时就会损耗大量性能。`immutable` 对象只要某个节点发生变化，就会返回一个全新的对象，原来相同的节点直接共享。这样一来，就可以与 `PureComponent` 和 `memo` 的浅层比对机制相结合，是提高 React 渲染性能的极佳方案。